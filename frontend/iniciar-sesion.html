<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <title>SpotiFIUBA</title>
        <link rel="stylesheet" href="styles/styles.css">
    </head>
    <body>
        <header>
        <div class="logo-spotifiuba" onclick="window.location.href='index.html'">
            <span class="negro">Spoti</span><span class="blanco">FIUBA</span><span class="tooltip">Ir a la Página Principal</span>
        </div>
        </header>
        <div class="input-login">
            <form>
                <div class="barra-input">
                    <label for="nombre_usuario">Nombre de Usuario:</label>
                    <input type="text" id="nombre_usuario" name="nombre_usuario">
                </div>
                <div class="barra-input">
                    <label for="email">Correo Electrónico (email, gmail, etc):</label>
                    <input type="text" id="email" name="email">
                </div>
                <div class="barra-input">
                    <label for="contraseña">Contraseña:</label>
                    <input type="password" id="contrasenia" name="contrasenia">
                </div>
                
            </form>
            <div class = "boton-wrapper">
                <button onclick = "login()" class= "boton-subir">Iniciar Sesion</button>
            </div>
            <div class="link-registro" onclick="window.location.href='crear-usuario.html'">
                    <p>¿No tenés una cuenta? Hacé click para ir a crear tu usuario.</p>
            </div>
            <script>
                async function login() {
                const email = document.getElementById("email").value;
                const contrasenia = document.getElementById("contrasenia").value;

                const res = await fetch("http://localhost:3000/login", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ email, contrasenia })
                });

                if (!res.ok) {
                    alert("Login incorrecto");
                    return;
                }

                const usuario = await res.json();
                localStorage.setItem("usuario", JSON.stringify(usuario));
                window.location.href = "index.html";
                }
             </script>  
    </body>
</html>
